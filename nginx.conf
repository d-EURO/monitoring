server {
    listen 80;
    server_name localhost;
    
    # Enable CORS
    add_header Access-Control-Allow-Origin *;
    add_header Access-Control-Allow-Methods "GET, POST, OPTIONS";
    add_header Access-Control-Allow-Headers "Content-Type";
    
    # Serve monitoring data
    location /api/system-state {
        alias /usr/share/nginx/html/data/system-state.json;
        add_header Content-Type application/json;
    }
    
    # Health check endpoint
    location /health {
        return 200 '{"status":"healthy","service":"deuro-monitoring-api"}\n';
        add_header Content-Type application/json;
    }
    
    # Simple dashboard (optional)
    location / {
        return 200 '<!DOCTYPE html>
<html>
<head>
    <title>dEURO Monitoring</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .container { max-width: 800px; margin: 0 auto; }
        .endpoint { background: #f5f5f5; padding: 10px; margin: 10px 0; border-radius: 4px; }
        .code { font-family: monospace; background: #eee; padding: 2px 4px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üè¶ dEURO Monitoring API</h1>
        <p>Real-time monitoring data for the dEURO protocol.</p>
        
        <h2>Available Endpoints:</h2>
        <div class="endpoint">
            <strong>GET /api/system-state</strong><br>
            Returns the complete system state in JSON format
        </div>
        <div class="endpoint">
            <strong>GET /health</strong><br>
            Health check endpoint
        </div>
        
        <h2>Usage Example:</h2>
        <div class="endpoint">
            <code class="code">curl http://localhost:8080/api/system-state | jq .</code>
        </div>
    </div>
</body>
</html>';
        add_header Content-Type text/html;
    }
}